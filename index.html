<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒè¿›åˆ¶é­”æœ¯ - æ•°å­—å¡«è¡¨æ¼”ç¤º</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const BinaryMagicBuilder = () => {
          const [mode, setMode] = useState("demo");
          const [currentNumber, setCurrentNumber] = useState(1);
          const [filledNumbers, setFilledNumbers] = useState({
            1: [], 2: [], 3: [], 4: [], 5: [], 6: [],
          });
          const [isAnimating, setIsAnimating] = useState(false);
          const [highlightCards, setHighlightCards] = useState([]);
          const [autoPlay, setAutoPlay] = useState(false);
          const [inputValue, setInputValue] = useState("");

          const [challengeNumber, setChallengeNumber] = useState(null);
          const [challengeStep, setChallengeStep] = useState(0);
          const [selectedDecimal, setSelectedDecimal] = useState([]);
          const [selectedBinary, setSelectedBinary] = useState([false, false, false, false, false, false]);
          const [selectedCards, setSelectedCards] = useState([]);
          const [feedback, setFeedback] = useState(null);

          const cards = [
            { id: 1, label: "A", value: 1, color: "from-red-500 to-pink-500" },
            { id: 2, label: "B", value: 2, color: "from-orange-500 to-yellow-500" },
            { id: 3, label: "C", value: 4, color: "from-green-500 to-emerald-500" },
            { id: 4, label: "D", value: 8, color: "from-blue-500 to-cyan-500" },
            { id: 5, label: "E", value: 16, color: "from-indigo-500 to-purple-500" },
            { id: 6, label: "F", value: 32, color: "from-purple-500 to-pink-500" },
          ];

          const getBinary = (num) => {
            const binary = [];
            for (let i = 0; i < 6; i++) {
              binary.push((num >> i) & 1);
            }
            return binary;
          };

          const getTargetCards = (num) => {
            return cards.filter(card => (num & card.value) !== 0).map(c => c.id);
          };

          const getDecimalBreakdown = (num) => {
            return cards.map(card => ({
              value: card.value,
              active: (num & card.value) !== 0,
              label: card.label,
            })).reverse();
          };

          const fillCurrentNumber = () => {
            if (currentNumber > 63) return;
            setIsAnimating(true);
            const targets = getTargetCards(currentNumber);
            setHighlightCards(targets);

            setTimeout(() => {
              const newFilled = { ...filledNumbers };
              targets.forEach((cardId) => {
                if (!newFilled[cardId].includes(currentNumber)) {
                  newFilled[cardId] = [...newFilled[cardId], currentNumber].sort((a, b) => a - b);
                }
              });
              setFilledNumbers(newFilled);
              setIsAnimating(false);
              setHighlightCards([]);
            }, 1500);
          };

          const nextNumber = () => {
            if (currentNumber < 63 && !isAnimating) {
              fillCurrentNumber();
              setTimeout(() => setCurrentNumber(currentNumber + 1), 1600);
            }
          };

          const prevNumber = () => {
            if (currentNumber > 1 && !isAnimating) {
              goToNumber(currentNumber - 1);
            }
          };

          const goToNumber = (num) => {
            if (num < 1 || num > 63) return;
            const newFilled = { 1: [], 2: [], 3: [], 4: [], 5: [], 6: [] };
            for (let i = 1; i < num; i++) {
              const targets = getTargetCards(i);
              targets.forEach((cardId) => {
                if (!newFilled[cardId].includes(i)) {
                  newFilled[cardId].push(i);
                }
              });
            }
            Object.keys(newFilled).forEach((key) => {
              newFilled[key].sort((a, b) => a - b);
            });
            setFilledNumbers(newFilled);
            setCurrentNumber(num);
            setAutoPlay(false);
          };

          const reset = () => {
            setCurrentNumber(1);
            setFilledNumbers({ 1: [], 2: [], 3: [], 4: [], 5: [], 6: [] });
            setIsAnimating(false);
            setHighlightCards([]);
            setAutoPlay(false);
          };

          const handleManualInput = () => {
            const num = parseInt(inputValue);
            if (!isNaN(num) && num >= 1 && num <= 63) {
              goToNumber(num);
              setInputValue("");
            }
          };

          useEffect(() => {
            if (autoPlay && !isAnimating && currentNumber <= 63) {
              const timer = setTimeout(() => {
                nextNumber();
              }, 2000);
              return () => clearTimeout(timer);
            } else if (currentNumber > 63) {
              setAutoPlay(false);
            }
          }, [autoPlay, currentNumber, isAnimating]);

          const startChallenge = () => {
            setMode("challenge");
            setChallengeStep(0);
            setChallengeNumber(null);
            setSelectedDecimal([]);
            setSelectedBinary([false, false, false, false, false, false]);
            setSelectedCards([]);
            setFeedback(null);
          };

          const selectChallengeNumber = (num) => {
            setChallengeNumber(num);
            setChallengeStep(1);
            setFeedback(null);
          };

          const toggleDecimal = (value) => {
            if (selectedDecimal.includes(value)) {
              setSelectedDecimal(selectedDecimal.filter(v => v !== value));
            } else {
              setSelectedDecimal([...selectedDecimal, value]);
            }
            setFeedback(null);
          };

          const checkDecimal = () => {
            const sum = selectedDecimal.reduce((a, b) => a + b, 0);
            if (sum === challengeNumber) {
              const correctBreakdown = cards.filter(c => (challengeNumber & c.value) !== 0).map(c => c.value);
              if (selectedDecimal.length === correctBreakdown.length && 
                  selectedDecimal.every(v => correctBreakdown.includes(v))) {
                setFeedback({ type: "success", message: "âœ“ æ­£ç¡®ï¼è¿›å…¥ä¸‹ä¸€æ­¥" });
                setTimeout(() => {
                  setChallengeStep(2);
                  setFeedback(null);
                }, 1500);
              } else {
                setFeedback({ type: "success", message: "âœ“ å’Œæ˜¯å¯¹çš„ï¼ä½†è¿˜æœ‰å…¶ä»–æ‹†åˆ†æ–¹å¼å—ï¼Ÿè¯•è¯•åªç”¨1,2,4,8,16,32" });
              }
            } else {
              setFeedback({ type: "error", message: `âœ— ä¸å¯¹å“¦ï¼Œè¿™äº›æ•°åŠ èµ·æ¥æ˜¯ ${sum}ï¼Œä¸æ˜¯ ${challengeNumber}` });
            }
          };

          const toggleBinary = (index) => {
            const newBinary = [...selectedBinary];
            newBinary[index] = !newBinary[index];
            setSelectedBinary(newBinary);
            setFeedback(null);
          };

          const checkBinary = () => {
            const correctBinary = getBinary(challengeNumber);
            const isCorrect = selectedBinary.every((bit, i) => bit === (correctBinary[i] === 1));
            if (isCorrect) {
              setFeedback({ type: "success", message: "âœ“ äºŒè¿›åˆ¶è¡¨ç¤ºæ­£ç¡®ï¼è¿›å…¥ä¸‹ä¸€æ­¥" });
              setTimeout(() => {
                setChallengeStep(3);
                setFeedback(null);
              }, 1500);
            } else {
              setFeedback({ type: "error", message: "âœ— äºŒè¿›åˆ¶è¡¨ç¤ºä¸å¯¹ï¼Œå†æƒ³æƒ³çœ‹" });
            }
          };

          const toggleCard = (cardId) => {
            if (selectedCards.includes(cardId)) {
              setSelectedCards(selectedCards.filter(id => id !== cardId));
            } else {
              setSelectedCards([...selectedCards, cardId]);
            }
            setFeedback(null);
          };

          const checkCards = () => {
            const correctCards = getTargetCards(challengeNumber);
            const isCorrect = selectedCards.length === correctCards.length &&
                              selectedCards.every(id => correctCards.includes(id));
            if (isCorrect) {
              setFeedback({ type: "success", message: "âœ“ é€‰æ‹©æ­£ç¡®ï¼ç°åœ¨å¡«å…¥å¡ç‰‡" });
              setTimeout(() => {
                const newFilled = { ...filledNumbers };
                selectedCards.forEach((cardId) => {
                  if (!newFilled[cardId].includes(challengeNumber)) {
                    newFilled[cardId] = [...newFilled[cardId], challengeNumber].sort((a, b) => a - b);
                  }
                });
                setFilledNumbers(newFilled);
                setChallengeStep(4);
                setFeedback(null);
              }, 1500);
            } else {
              setFeedback({ type: "error", message: "âœ— é€‰æ‹©çš„å¡ç‰‡ä¸å¯¹ï¼Œçœ‹çœ‹äºŒè¿›åˆ¶å“ªäº›ä½æ˜¯1" });
            }
          };

          const nextChallenge = () => {
            const nextNum = challengeNumber + 1;
            if (nextNum <= 63) {
              selectChallengeNumber(nextNum);
              setSelectedDecimal([]);
              setSelectedBinary([false, false, false, false, false, false]);
              setSelectedCards([]);
            }
          };

          const backToDemo = () => {
            setMode("demo");
            setFeedback(null);
          };

          if (mode === "challenge") {
            return (
              <div className="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-pink-900 text-white p-4">
                <div className="max-w-6xl mx-auto">
                  <header className="text-center py-6">
                    <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                      ğŸ® æŒ‘æˆ˜æ¨¡å¼
                    </h1>
                    <button
                      onClick={backToDemo}
                      className="mt-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm"
                    >
                      â† è¿”å›æ¼”ç¤ºæ¨¡å¼
                    </button>
                  </header>

                  {challengeStep === 0 && (
                    <div className="bg-white/10 backdrop-blur-lg rounded-xl p-8">
                      <h2 className="text-3xl font-bold text-center mb-6 text-yellow-300">
                        é€‰æ‹©ä¸€ä¸ªæ•°å­—å¼€å§‹æŒ‘æˆ˜
                      </h2>
                      <div className="grid grid-cols-7 gap-3 max-w-3xl mx-auto">
                        {Array.from({ length: 63 }, (_, i) => i + 1).map(num => (
                          <button
                            key={num}
                            onClick={() => selectChallengeNumber(num)}
                            className="h-14 bg-gradient-to-br from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 rounded-lg text-2xl font-bold transition-all duration-200 hover:scale-110"
                          >
                            {num}
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                  {challengeStep === 1 && (
                    <div className="space-y-6">
                      <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6">
                        <h2 className="text-2xl font-bold text-center mb-4 text-yellow-300">
                          ç¬¬1æ­¥ï¼šæŠŠ {challengeNumber} æ‹†åˆ†æˆå‡ ä¸ªæ•°ç›¸åŠ 
                        </h2>
                        <p className="text-center text-blue-200 mb-6">
                          ç‚¹å‡»ä¸‹é¢çš„æ•°å­—ï¼Œé€‰æ‹©éœ€è¦çš„æ•°ï¼Œè®©å®ƒä»¬ç›¸åŠ ç­‰äº {challengeNumber}
                        </p>
                        
                        <div className="flex flex-wrap justify-center gap-4 mb-6">
                          {[32, 16, 8, 4, 2, 1].map(value => (
                            <button
                              key={value}
                              onClick={() => toggleDecimal(value)}
                              className={`px-8 py-4 rounded-xl text-2xl font-bold transition-all duration-300 ${
                                selectedDecimal.includes(value)
                                  ? "bg-green-500 text-white scale-110 shadow-lg"
                                  : "bg-gray-700 text-gray-300 hover:bg-gray-600"
                              }`}
                            >
                              {value}
                            </button>
                          ))}
                        </div>

                        <div className="text-center mb-6">
                          <div className="text-xl text-gray-300 mb-2">ä½ é€‰æ‹©çš„æ•°å­—ï¼š</div>
                          <div className="text-3xl font-bold">
                            {selectedDecimal.length === 0 ? (
                              <span className="text-gray-500">è¿˜æ²¡é€‰æ‹©</span>
                            ) : (
                              <>
                                {selectedDecimal.sort((a, b) => b - a).join(" + ")} = {selectedDecimal.reduce((a, b) => a + b, 0)}
                              </>
                            )}
                          </div>
                        </div>

                        {feedback && (
                          <div className={`text-center text-xl font-bold mb-4 ${
                            feedback.type === "success" ? "text-green-300" : "text-red-300"
                          }`}>
                            {feedback.message}
                          </div>
                        )}

                        <div className="text-center">
                          <button
                            onClick={checkDecimal}
                            disabled={selectedDecimal.length === 0}
                            className="px-8 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-full text-xl font-bold transition-all duration-300"
                          >
                            æ£€æŸ¥ç­”æ¡ˆ
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {challengeStep === 2 && (
                    <div className="space-y-6">
                      <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6">
                        <h2 className="text-2xl font-bold text-center mb-4 text-yellow-300">
                          ç¬¬2æ­¥ï¼šç‚¹äº® {challengeNumber} çš„äºŒè¿›åˆ¶è¡¨ç¤º
                        </h2>
                        <p className="text-center text-blue-200 mb-6">
                          æ ¹æ®åˆšæ‰çš„æ‹†åˆ†ï¼Œç‚¹å‡»ç›¸åº”çš„æ ¼å­ï¼ŒæŠŠå®ƒå˜æˆ1
                        </p>

                        <div className="flex justify-around mb-4 max-w-3xl mx-auto">
                          {[...cards].reverse().map((card) => (
                            <div key={card.id} className="text-center w-20">
                              <div className={`text-lg font-bold bg-gradient-to-r ${card.color} bg-clip-text text-transparent`}>
                                {card.label}
                              </div>
                              <div className="text-xs text-gray-400">
                                {card.value}
                              </div>
                            </div>
                          ))}
                        </div>

                        <div className="flex justify-around mb-6 max-w-3xl mx-auto">
                          {[...cards].reverse().map((card, reverseIndex) => {
                            const index = 5 - reverseIndex;
                            const isSelected = selectedBinary[index];
                            return (
                              <button
                                key={card.id}
                                onClick={() => toggleBinary(index)}
                                className={`w-20 h-20 flex items-center justify-center rounded-xl text-4xl font-bold transition-all duration-300 ${
                                  isSelected
                                    ? `bg-gradient-to-br ${card.color} text-white scale-110 shadow-lg`
                                    : "bg-gray-700 text-gray-500 hover:bg-gray-600"
                                }`}
                              >
                                {isSelected ? "1" : "0"}
                              </button>
                            );
                          })}
                        </div>

                        <div className="text-center text-sm text-gray-400 mb-6">
                          äºŒè¿›åˆ¶ï¼š{[...selectedBinary].reverse().map(b => b ? "1" : "0").join("")}
                        </div>

                        {feedback && (
                          <div className={`text-center text-xl font-bold mb-4 ${
                            feedback.type === "success" ? "text-green-300" : "text-red-300"
                          }`}>
                            {feedback.message}
                          </div>
                        )}

                        <div className="text-center">
                          <button
                            onClick={checkBinary}
                            className="px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-full text-xl font-bold transition-all duration-300"
                          >
                            æ£€æŸ¥ç­”æ¡ˆ
                          </button>
                        </div>
                      </div>
                    </div>
                  )}

                  {challengeStep === 3 && (
                    <div className="space-y-6">
                      <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-6">
                        <h2 className="text-2xl font-bold text-center mb-4 text-yellow-300">
                          ç¬¬3æ­¥ï¼šé€‰æ‹©è¦å¡«å…¥çš„å¡ç‰‡
                        </h2>
                        <p className="text-center text-blue-200 mb-6">
                          æ ¹æ®äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œç‚¹å‡»åº”è¯¥åŒ…å«æ•°å­— {challengeNumber} çš„å¡ç‰‡
                        </p>

                        <div className="flex justify-center mb-6 max-w-3xl mx-auto">
                          {[...cards].reverse().map((card, reverseIndex) => {
                            const index = 5 - reverseIndex;
                            const binary = getBinary(challengeNumber);
                            const isOne = binary[index] === 1;
                            return (
                              <div key={card.id} className="w-20 text-center">
                                <div className={`text-lg font-bold bg-gradient-to-r ${card.color} bg-clip-text text-transparent`}>
                                  {card.label}
                                </div>
                                <div className={`text-3xl font-bold ${isOne ? "text-green-400" : "text-gray-600"}`}>
                                  {isOne ? "1" : "0"}
                                </div>
                              </div>
                            );
                          })}
                        </div>

                        {feedback && (
                          <div className={`text-center text-xl font-bold mb-4 ${
                            feedback.type === "success" ? "text-green-300" : "text-red-300"
                          }`}>
                            {feedback.message}
                          </div>
                        )}

                        <div className="text-center mb-6">
                          <button
                            onClick={checkCards}
                            disabled={selectedCards.length === 0}
                            className="px-8 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-full text-xl font-bold transition-all duration-300"
                          >
                            æ£€æŸ¥ç­”æ¡ˆ
                          </button>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                        {cards.map((card) => {
                          const isSelected = selectedCards.includes(card.id);
                          return (
                            <button
                              key={card.id}
                              onClick={() => toggleCard(card.id)}
                              className={`bg-white/10 backdrop-blur-lg rounded-xl p-6 transition-all duration-300 ${
                                isSelected
                                  ? "ring-4 ring-yellow-400 shadow-2xl shadow-yellow-400/50 scale-105"
                                  : "ring-1 ring-white/20 hover:ring-2 hover:ring-white/40"
                              }`}
                            >
                              <h3 className={`text-2xl font-bold text-center bg-gradient-to-r ${card.color} bg-clip-text text-transparent`}>
                                å¡ç‰‡{card.label}
                              </h3>
                              <div className="text-center text-gray-400 mt-2">
                                {card.value}
                              </div>
                              {isSelected && (
                                <div className="text-center mt-2 text-green-300 text-2xl">
                                  âœ“
                                </div>
                              )}
                            </button>
                          );
                        })}
                      </div>
                    </div>
                  )}

                  {challengeStep === 4 && (
                    <div className="space-y-6">
                      <div className="bg-gradient-to-r from-green-500/20 to-blue-500/20 backdrop-blur-lg rounded-xl p-8 text-center border-2 border-green-400/50">
                        <div className="text-6xl mb-4">ğŸ‰</div>
                        <h2 className="text-3xl font-bold mb-4 text-green-300">
                          å¤ªæ£’äº†ï¼å®Œæˆäº†æ•°å­— {challengeNumber}
                        </h2>
                        <p className="text-xl text-blue-200 mb-6">
                          æ•°å­—å·²ç»å¡«å…¥åˆ°ç›¸åº”çš„å¡ç‰‡ä¸­äº†
                        </p>
                        <div className="flex justify-center gap-4">
                          <button
                            onClick={nextChallenge}
                            disabled={challengeNumber >= 63}
                            className="px-8 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-full text-xl font-bold transition-all duration-300"
                          >
                            ä¸‹ä¸€ä¸ªæ•°å­— ({challengeNumber + 1})
                          </button>
                          <button
                            onClick={() => setChallengeStep(0)}
                            className="px-8 py-3 bg-blue-600 hover:bg-blue-700 rounded-full text-xl font-bold transition-all duration-300"
                          >
                            é€‰æ‹©å…¶ä»–æ•°å­—
                          </button>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                        {cards.map((card) => {
                          const numbers = filledNumbers[card.id] || [];
                          const hasCurrentNumber = numbers.includes(challengeNumber);
                          
                          return (
                            <div
                              key={card.id}
                              className={`bg-white/10 backdrop-blur-lg rounded-xl p-4 ${
                                hasCurrentNumber ? "ring-4 ring-green-400 shadow-lg shadow-green-400/50" : "ring-1 ring-white/20"
                              }`}
                            >
                              <h3 className={`text-xl font-bold text-center mb-3 bg-gradient-to-r ${card.color} bg-clip-text text-transparent`}>
                                å¡ç‰‡{card.label}
                              </h3>
                              <div className="bg-white/20 rounded-lg p-3">
                                <div className="grid grid-cols-8 gap-1">
                                  {Array.from({ length: 32 }).map((_, gridIndex) => {
                                    // æŒ‰åˆ—å¡«å……ï¼šè®¡ç®—å®é™…çš„æ•°ç»„ç´¢å¼•
                                    const row = Math.floor(gridIndex / 8);
                                    const col = gridIndex % 8;
                                    const arrayIndex = col * 4 + row;
                                    const num = numbers[arrayIndex];
                                    const isHighlight = num === challengeNumber;
                                    return (
                                      <div
                                        key={gridIndex}
                                        className={`h-8 flex items-center justify-center rounded text-xs font-medium transition-all duration-300 ${
                                          isHighlight
                                            ? "bg-yellow-400 text-gray-900 animate-pulse scale-125 shadow-lg"
                                            : num
                                            ? "bg-blue-500/50 text-white"
                                            : "bg-gray-700/30"
                                        }`}
                                      >
                                        {num || ""}
                                      </div>
                                    );
                                  })}
                                </div>
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    </div>
                  )}
                </div>

                <footer className="text-center text-sm text-gray-400 py-6 mt-6">
                  Â© {new Date().getFullYear()} å­™ç»´åˆšæ•™è‚²ç ”ç©¶é™¢-é™ˆç¡•è€å¸ˆ ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
                </footer>
              </div>
            );
          }

          const binaryBits = getBinary(currentNumber);
          const decimalBreakdown = getDecimalBreakdown(currentNumber);
          const targetCards = getTargetCards(currentNumber);

          return (
            <div className="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white p-4">
              <div className="max-w-7xl mx-auto">
                <header className="text-center py-6">
                  <h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                    ğŸ”¢ äºŒè¿›åˆ¶é­”æœ¯ - æ•°å­—å¡«è¡¨æ¼”ç¤º
                  </h1>
                  <p className="text-lg text-blue-200 mb-4">
                    çœ‹çœ‹æ¯ä¸ªæ•°å­—å¦‚ä½•å˜æˆäºŒè¿›åˆ¶ï¼Œå¹¶å¡«å…¥ç›¸åº”çš„å¡ç‰‡
                  </p>
                  <button
                    onClick={startChallenge}
                    className="px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 rounded-full text-lg font-bold transition-all duration-300 hover:scale-105 shadow-lg"
                  >
                    ğŸ® è¿›å…¥æŒ‘æˆ˜æ¨¡å¼
                  </button>
                </header>

                <div className="grid lg:grid-cols-2 gap-6 mb-6">
                  <div className="space-y-4">
                    {/* æ§åˆ¶æŒ‰é’® - ç§»åˆ°é¡¶éƒ¨ */}
                    <div className="bg-white/10 backdrop-blur-lg rounded-xl p-4">
                      <div className="flex flex-wrap items-center justify-center gap-3 mb-3">
                        <button
                          onClick={prevNumber}
                          disabled={currentNumber <= 1 || isAnimating}
                          className="px-5 py-2 rounded-full font-bold bg-blue-600 hover:bg-blue-700 text-white transition-all duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed text-sm"
                        >
                          â† ä¸Šä¸€ä¸ª
                        </button>
                        <button
                          onClick={nextNumber}
                          disabled={currentNumber > 63 || isAnimating}
                          className="px-6 py-2 rounded-full font-bold bg-purple-600 hover:bg-purple-700 text-white transition-all duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg text-sm"
                        >
                          {isAnimating ? "å¡«å…¥ä¸­..." : "å¡«å…¥å½“å‰æ•°å­—"}
                        </button>
                        <button
                          onClick={() => setAutoPlay(!autoPlay)}
                          disabled={isAnimating || currentNumber > 63}
                          className={`px-5 py-2 rounded-full font-bold transition-all duration-300 text-sm ${
                            autoPlay ? "bg-red-600 hover:bg-red-700" : "bg-green-600 hover:bg-green-700"
                          } text-white disabled:bg-gray-600 disabled:cursor-not-allowed`}
                        >
                          {autoPlay ? "â¸ æš‚åœ" : "â–¶ è‡ªåŠ¨æ’­æ”¾"}
                        </button>
                        <button
                          onClick={reset}
                          className="px-5 py-2 rounded-full font-bold bg-gray-700 hover:bg-gray-600 text-white transition-all duration-300 text-sm"
                        >
                          ğŸ”„ é‡ç½®
                        </button>
                      </div>
                      
                      {/* è·³è½¬åŠŸèƒ½ */}
                      <div className="flex items-center justify-center gap-3 text-sm">
                        <label className="font-medium">è·³è½¬ï¼š</label>
                        <input
                          type="number"
                          min="1"
                          max="63"
                          value={inputValue}
                          onChange={(e) => setInputValue(e.target.value)}
                          onKeyPress={(e) => e.key === "Enter" && handleManualInput()}
                          placeholder="1-63"
                          className="w-20 px-3 py-1 rounded-lg bg-white/20 border border-white/30 text-white text-center focus:outline-none focus:ring-2 focus:ring-yellow-400"
                        />
                        <button
                          onClick={handleManualInput}
                          className="px-4 py-1 rounded-lg font-bold bg-yellow-600 hover:bg-yellow-700 text-white transition-all duration-300"
                        >
                          GO
                        </button>
                      </div>
                    </div>

                    <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border-2 border-yellow-400/50">
                      <h2 className="text-2xl font-bold text-center mb-4 text-yellow-300">å½“å‰æ•°å­—</h2>
                      <div className="text-8xl font-bold text-center mb-4 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                        {currentNumber}
                      </div>
                      {/* è¿›åº¦æ¡ */}
                      <div className="mt-4">
                        <div className="flex justify-between text-xs text-gray-300 mb-1">
                          <span>è¿›åº¦ï¼š{Math.min(currentNumber - 1, 63)} / 63</span>
                          <span>{Math.round(((currentNumber - 1) / 63) * 100)}%</span>
                        </div>
                        <div className="w-full bg-gray-700 rounded-full h-2">
                          <div
                            className="bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300"
                            style={{ width: `${Math.min(((currentNumber - 1) / 63) * 100, 100)}%` }}
                          />
                        </div>
                      </div>
                    </div>

                    <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6">
                      <h3 className="text-xl font-bold mb-4 text-green-300">ğŸ“Š åè¿›åˆ¶æ‹†è§£</h3>
                      <div className="flex flex-wrap items-center justify-center gap-2 text-lg">
                        <span className="text-yellow-300 font-bold">{currentNumber}</span>
                        <span>=</span>
                        {decimalBreakdown.map((item, index) => (
                          <React.Fragment key={index}>
                            {index > 0 && <span>+</span>}
                            <div className={`px-4 py-2 rounded-lg font-bold transition-all duration-300 ${
                              item.active ? "bg-green-500 text-white scale-110" : "bg-gray-700 text-gray-500"
                            }`}>
                              {item.value}
                            </div>
                          </React.Fragment>
                        ))}
                      </div>
                    </div>

                    <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6">
                      <h3 className="text-xl font-bold mb-4 text-purple-300">ğŸ’» äºŒè¿›åˆ¶è¡¨ç¤º</h3>
                      <div className="space-y-4">
                        <div className="flex justify-around">
                          {[...cards].reverse().map((card) => (
                            <div key={card.id} className="text-center">
                              <div className={`text-sm font-bold bg-gradient-to-r ${card.color} bg-clip-text text-transparent`}>
                                å¡ç‰‡{card.label}
                              </div>
                              <div className="text-xs text-gray-400">
                                {card.value}
                              </div>
                            </div>
                          ))}
                        </div>

                        <div className="flex justify-around">
                          {[...binaryBits].reverse().map((bit, reverseIndex) => {
                            const index = 5 - reverseIndex;
                            const card = cards[index];
                            const isOne = bit === 1;
                            return (
                              <div
                                key={reverseIndex}
                                className={`w-16 h-16 flex items-center justify-center rounded-lg text-3xl font-bold transition-all duration-500 ${
                                  isOne
                                    ? `bg-gradient-to-br ${card.color} text-white scale-110 shadow-lg`
                                    : "bg-gray-700 text-gray-500"
                                }`}
                              >
                                {bit}
                              </div>
                            );
                          })}
                        </div>

                        <div className="text-center text-sm text-gray-400">
                          äºŒè¿›åˆ¶ï¼š{[...binaryBits].reverse().join("")}
                          <div className="text-xs mt-1">ï¼ˆæœ€å³è¾¹æ˜¯æœ€ä½ä½Aï¼Œæœ€å·¦è¾¹æ˜¯æœ€é«˜ä½Fï¼‰</div>
                        </div>
                      </div>
                    </div>

                    {targetCards.length > 0 && (
                      <div className="bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-lg rounded-xl p-4 border border-yellow-400/30">
                        <div className="text-center">
                          <div className="text-lg font-bold text-yellow-300 mb-2">âœ¨ å°†å¡«å…¥ä»¥ä¸‹å¡ç‰‡</div>
                          <div className="flex justify-center gap-2">
                            {targetCards.map((cardId) => {
                              const card = cards.find((c) => c.id === cardId);
                              return (
                                <div key={cardId} className={`px-4 py-2 rounded-lg font-bold bg-gradient-to-r ${card.color} text-white`}>
                                  å¡ç‰‡{card.label}
                                </div>
                              );
                            })}
                          </div>
                        </div>
                      </div>
                    )}
                  </div>

                  <div>
                    <h2 className="text-2xl font-bold mb-4 text-center text-cyan-300">ğŸ“‹ å…­å¼ é­”æœ¯å¡ç‰‡</h2>
                    <div className="grid grid-cols-2 gap-4">
                      {cards.map((card) => {
                        const isHighlighted = highlightCards.includes(card.id);
                        const numbers = filledNumbers[card.id] || [];
                        return (
                          <div
                            key={card.id}
                            className={`bg-white/10 backdrop-blur-lg rounded-xl p-4 transition-all duration-500 ${
                              isHighlighted ? "ring-4 ring-yellow-400 shadow-2xl shadow-yellow-400/50 scale-105" : "ring-1 ring-white/20"
                            }`}
                          >
                            <div className="flex items-center justify-between mb-3">
                              <h3 className={`text-lg font-bold bg-gradient-to-r ${card.color} bg-clip-text text-transparent`}>
                                å¡ç‰‡{card.label}
                              </h3>
                              <span className="text-sm text-gray-400">{card.value}</span>
                            </div>
                            <div className="bg-white/20 rounded-lg p-3 min-h-[200px]">
                              <div className="grid grid-cols-8 gap-1">
                                {Array.from({ length: 32 }).map((_, gridIndex) => {
                                  // æŒ‰åˆ—å¡«å……ï¼šè®¡ç®—å®é™…çš„æ•°ç»„ç´¢å¼•
                                  const row = Math.floor(gridIndex / 8);
                                  const col = gridIndex % 8;
                                  const arrayIndex = col * 4 + row;
                                  const num = numbers[arrayIndex];
                                  const isJustFilled = num === currentNumber && isHighlighted;
                                  return (
                                    <div
                                      key={gridIndex}
                                      className={`h-8 flex items-center justify-center rounded text-xs font-medium transition-all duration-300 ${
                                        num
                                          ? isJustFilled
                                            ? "bg-yellow-400 text-gray-900 animate-pulse scale-110"
                                            : "bg-blue-500 text-white"
                                          : "bg-gray-700/30"
                                      }`}
                                    >
                                      {num || ""}
                                    </div>
                                  );
                                })}
                              </div>
                            </div>
                            <div className="mt-2 text-center text-xs text-gray-400">å·²å¡«å…¥ {numbers.length} ä¸ªæ•°å­—</div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>

                <div className="mt-6 bg-white/10 backdrop-blur-lg rounded-xl p-6">
                  <h3 className="text-xl font-bold mb-3 text-yellow-300">ğŸ’¡ ä½¿ç”¨è¯´æ˜</h3>
                  <ul className="space-y-2 text-blue-200">
                    <li>â€¢ <strong>æ¼”ç¤ºæ¨¡å¼ï¼š</strong>è‡ªåŠ¨æ¼”ç¤ºæ¯ä¸ªæ•°å­—çš„åˆ†è§£å’Œå¡«å…¥è¿‡ç¨‹</li>
                    <li>â€¢ <strong>æŒ‘æˆ˜æ¨¡å¼ï¼š</strong>è‡ªå·±åŠ¨æ‰‹æ“ä½œï¼Œä½“éªŒå®Œæ•´çš„å­¦ä¹ è¿‡ç¨‹</li>
                    <li>â€¢ <strong>äºŒè¿›åˆ¶ä½ï¼š</strong>æœ€å³è¾¹æ˜¯Aï¼ˆæœ€ä½ä½ï¼‰ï¼Œæœ€å·¦è¾¹æ˜¯Fï¼ˆæœ€é«˜ä½ï¼‰</li>
                    <li>â€¢ <strong>è§‚å¯Ÿè¦ç‚¹ï¼š</strong>æ³¨æ„äºŒè¿›åˆ¶ä½ä¸º1çš„ä½ç½®ï¼Œå¯¹åº”è¦å¡«å…¥çš„å¡ç‰‡</li>
                  </ul>
                </div>
              </div>

              <footer className="text-center text-sm text-gray-400 py-6 mt-6">
                Â© {new Date().getFullYear()} å­™ç»´åˆšæ•™è‚²ç ”ç©¶é™¢-é™ˆç¡•è€å¸ˆ ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
              </footer>
            </div>
          );
        };

        ReactDOM.render(<BinaryMagicBuilder />, document.getElementById('root'));
    </script>
</body>
</html>
